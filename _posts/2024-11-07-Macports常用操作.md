---
layout: post
title: "Macports常用操作"
category: 天马行空
tags: macports
date: 2024-11-07 09:00
---


### 修改安装源  
macports更新卡住是因为使用了国外的源问题，使用VPN即可。  
无VPN可以修改安装源地址，再更新即可。

修改/opt/local/etc/macports/sources.conf，把最后的rsync注释掉换成其它镜像源。  
China, Beijing 
``` 
[rsync://pek.cn.rsync.macports.org/macports/release/tarballs/ports.tar](https://links.jianshu.com/go?to=rsync%3A%2F%2Fpek.cn.rsync.macports.org%2Fmacports%2Frelease%2Ftarballs%2Fports.tar) [default]  
```
官方提供的源地址：[https://trac.macports.org/wiki/Mirrors](https://links.jianshu.com/go?to=https%3A%2F%2Ftrac.macports.org%2Fwiki%2FMirrors)



### macports 常用命令
升级 mac port 自身

#### sudo port selfupdate  
更新的是 port 自身，以及仓库文件索引。

更新后，先不急着更新其他软件。先找出那些是不需要可以删除的软件或依赖。

#### port installed inactive  
列出所有「非激活」态的软件(包)，我将删除这些软件(包)。

删除没有用到的软件(包)

#### sudo port uninstall inactive  
查看是否有不需要的依赖

#### port echo leaves  
leaves 这个词很形象，孤立的叶子节点，很好记。

删除不需要的依赖

#### sudo port uninstall leaves  
一般需要删除多次，因为有些依赖是循环依赖于前一个不需要的依赖。  
直到报错说没有匹配的结果为止。

#### sudo port uninstall leaves  
Error: No ports matched the given expression  
这时再查找哪些软件(包)已经有新版本

#### port outdated  
建议单独升级需要的软件(包)，比如A B C

#### sudo port upgrade A B C...  
或者直接升级所有旧软件(包)（不推荐）

#### sudo port upgrade outdated